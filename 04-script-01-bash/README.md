# Домашнее задание к занятию "4.1. Командная оболочка Bash: Практические навыки"

## Обязательные задания

1. Есть скрипт:
	```bash
	a=1
	b=2
	c=a+b
	d=$a+$b
	e=$(($a+$b))
	```
	* Какие значения переменным c,d,e будут присвоены?
	* Почему?
	>Переменной "с" будет присвоено значение "a+b". Если в bash присвоить переменной какое-либо значение без сециальных символов и экранирований, то пепеременной будет присвоено ровно то, что написано после знака равно, тип переменной будет - строка. После знака равно у нас написано "a+b", поэтому в переменоой лежит строка "a+b".

	>Переменной "d" будет присвоено значение "1+2". У этой переменной все еще по умолчанию тип - строка, потому что мы ее не объявляли целым числом. $a запишет в переменную единицу, так как знак доллара возьмет то, что лежит в переменной "a", а туда мы ранее положили единицу в виде строки. После этого положим "+" как продолжение строки после единицы. После этого $b положит в переменную двойку, которую мы ранее присвоили переменной b. В итоге, в виде строки в переменной d будет лежать "1+2".

	>Для того, чтобы полодить в переменную результат арифмитической операции нужно указать знак $ и в двойных скобках написать арифм. операцию.
	Поэтому в переменной "e" будет лежать целое число 3(мы выполнили операцию с целыми числами и получили целое число).



1. На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным. В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:
	```bash
	while ((1==1)
	do
	curl https://localhost:4757
	if (($? != 0))
	then
	date >> curl.log
	fi
	done
	```
	>Чтобы завершить выполнение скрипта в момент, когда сервис поднимется, необходимо добавить условие выхода из цикла/уловие приостановления цикла.

	>Можно сдлеать это через break таким образом:

		while ((1==1)
		do
		curl https://localhost:4757
		if (($? != 0))
		then
		date >> curl.log
		else
		break
		fi
		done
	>Либо же можно сделать это добавив условие выхода из цикла в сам while:

		n=1
		while ((n != 0))
		do
		curl https://localhost:4757
		n=$?
		date >> curl.log
		done
	>Тогда последнее время, записанное в файл, будет временем последней проверки, когда сервис поднялся.

1. Необходимо написать скрипт, который проверяет доступность трёх IP: 192.168.0.1, 173.194.222.113, 87.250.250.242 по 80 порту и записывает результат в файл log. Проверять доступность необходимо пять раз для каждого узла.

	>Скрипт ниже:

		#!/bin/bash

		for (( n=1; n <= 5; n++ ))
		do
		nc -v -z 192.168.0.1 80 &>> new_file.txt
		nc -v -z 173.194.222.113 80 &>> new_file.txt
		nc -v -z 87.250.250.242 80 &>> new_file.txt
		done

4. Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается

	>Скрипт ниже:

		#!/bin/bash
		n=0
		while (( n == 0 ))
		do
		nc -vz 173.194.222.113 80 1>> correct 2>> error
		n=$(($n+$?))
		nc -v -z 87.250.250.242 80 1>> correct 2>> error
		n=$(($n+$?))
		nc -v -z 192.168.0.1 80 1>> correct 2>> error
		n=$(($n+$?))
		echo $n
		done
