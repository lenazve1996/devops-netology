# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1. На лекции мы обсудили, что манипулировать размером окна необходимо для эффективного наполнения приемного буфера участников TCP сессии (Flow Control). Подобная проблема в полной мере возникает в сетях с высоким RTT. Например, если вы захотите передать 500 Гб бэкап из региона Юга-Восточной Азии на Восточное побережье США. [Здесь](https://www.cloudping.co/grid) вы можете увидеть и 200 и 400 мс вполне реального RTT. Подсчитайте, какого размера нужно окно TCP чтобы наполнить 1 Гбит/с канал при 300 мс RTT (берем простую ситуацию без потери пакетов). Можно воспользоваться готовым [калькулятором](https://www.switch.ch/network/tools/tcp_throughput/). Ознакомиться с [формулами](https://en.wikipedia.org/wiki/TCP_tuning), по которым работает калькулятор можно, например, на Wiki.

    >Чтобы заполнить 1 Гбит/с канал при 300 мс RTT нужно окно TCP размером 37 500 000 (байт).

    >Размер окна в битах = Полоса пропускания (бит/сек) * RTT (время пинга).

    >10 * 10^8 (бит/с) * 0.3 (с) = 300 000 000 (бит)

    >300 000 000 (бит) / 8 = 37 500 000 (байт)

1. Во сколько раз упадет пропускная способность канала, если будет 1% потерь пакетов при передаче?
   > Предел пропускной способности канала можно рассчитать по формуле Mathis:

        пропускная способность канала = MSS/(RTT*sqrt(Ploss))

    >В нашем случае: MSS = 1460 байт, RTT = 300 мс, Ploss = 1%
    
    >пропускная способность канала = 11680 бит / (0.3 с * sqrt(0.01)) = 11680 бит/с 0.03 = 389 333 бит/с ≈ 0.39  Мбит/с

    >Таким образом, пропускная способность канала упала в 2564 раза , так как была 1000 Мбит/с а стала 0.39  Мбит/с


1. Какая  максимальная реальная скорость передачи данных достижима при линке 100 Мбит/с? Вопрос про TCP payload, то есть цифры, которые вы реально увидите в операционной системе в тестах или в браузере при скачивании файлов. Повлияет ли размер фрейма на это?

	>Максимальная реальная скорость передачи данных при линке 100 Мбит/с составляет 12,5 Мбайт (100 / 8)

	> Если мы хотим посчитать скорость передачи самих чистых данных, то стоит учитывать и размер заголовка TCP-сегмента. Заголовок Ethernet TCP-сегмента имеет размер 40 байт. Фрейм стандартно имеет размер 1500 байт. Полезной информации в фрейме, которую непосредственно нам надо передать, остается 1460 байт. Выходит, что заголовок составляет 2,67% от фрейма. Раз мы передаем полезных данных на 2,67% меньше, то можно от пропускной способности отнять эти 2,67%. Тогда максимальная реальная скорость передачи данных при линке 100 Мбит/с составит 12,17 Мбайт

1. Что на самом деле происходит, когда вы открываете сайт? :)
На прошлой лекции был приведен сокращенный вариант ответа на этот вопрос. Теперь вы знаете намного больше, в частности про IP адресацию, DNS и т.д.
Опишите максимально подробно насколько вы это можете сделать, что происходит, когда вы делаете запрос `curl -I http://netology.ru` с вашей рабочей станции. Предположим, что arp кеш очищен, в локальном DNS нет закешированных записей.

1. Сколько и каких итеративных запросов будет сделано при резолве домена `www.google.co.uk`?

1. Сколько доступно для назначения хостам адресов в подсети `/25`? А в подсети с маской `255.248.0.0`. Постарайтесь потренироваться в ручных вычислениях чтобы немного набить руку, не пользоваться калькулятором сразу.

    > В подсети `/25` доступно 128 адресов. За вычетом зарезервированных адресов (адреса подсети, адреса для широковещательных сообщений), адреса нашего хоста, адреса шлюза, остается 124 адреса, которые можно назначать другим хостам. 

    >Если подсеть `255.248.0.0` перевести в двоичное число, получится `11111111.11111000.00000000.00000000`. Это маска `/13` (так как 13 единиц в сетевой части маски). В этой маске доступно 2^19 адресов (так как 19 нулей в хостовой части маски), то есть доступно 524288 адресов.
1. В какой подсети больше адресов, в `/23` или `/24`?

    >Адресов больше в маске подсети `/23`. В подсети `/23` - 512 адресов, а в подсети `/24` - 256 адресов.

1. Получится ли разделить диапазон `10.0.0.0/8` на 128 подсетей по 131070 адресов в каждой? Какая маска будет у таких подсетей?

    > В маске `/8` всего есть 16 777 216 адресов. Данное количество адресов получится разделить на 128 подсетей по 131070 в каждой, так как 128 * 131070 = 16 776 960

    >Маска данных подсетей будет `/8` или 255.0.0.0.
